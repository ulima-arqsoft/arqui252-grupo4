> [5. T√°cticas](../../5.md) ‚Ä∫ [5.7. Listado Consolidado](../5.7.md) ‚Ä∫ [5.7.1. T√°cticas de Disponibilidad](5.7.1.md)

# 5.7.1. T√°cticas de Disponibilidad

- [Volver al √≠ndice](/5/5.md)


##  M√≥dulo 03: Carrito de Compras y Pedidos

## Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo** | **Fuente del Est√≠mulo** | **Artefacto** | **Entorno** | **Respuesta** | **Medida de Respuesta** |
|--------------------|--------------------------|---------------|--------------------------|----------------|---------------|--------------------------|---------------------------|
| ESC-CCP-01 | Disponibilidad | Ca√≠da del microservicio de carrito durante una compra | Servidor Backend | M√≥dulo de Carrito | Producci√≥n | El sistema entra en modo degradado y conserva los productos seleccionados | Recuperaci√≥n autom√°tica < 5 s |

- Aplica t√©cnica de **Redundancia Pasiva (Warm Spare)** con las siguientes alternativas:  
  1. Implementar **heartbeat y monitoreo peri√≥dico para detectar fallas**.  
  2. Configurar **instancia pasiva sincronizada que pueda activarse autom√°ticamente ante una ca√≠da**.

### **T√°ctica Elegida**
**Redundancia Pasiva (Warm Spare)**

**Contexto:**  
El carrito de compras es esencial para las ventas. Una ca√≠da durante la sesi√≥n del usuario podr√≠a implicar p√©rdida de oportunidades de venta y experiencia negativa.

**Alternativas:**  
1. **Heartbeat + Monitoreo:**  
   - Detecta fallos en menos de 3 segundos.  
   - Reinicia el servicio autom√°ticamente.  

2. **Instancia Pasiva Sincronizada:**  
   - Copia activa de datos en tiempo real.  
   - Activaci√≥n inmediata al detectar falla.  

**Criterios de elecci√≥n:**  
- **Disponibilidad:** Recuperaci√≥n <5s.  
- **Costo:** Menor consumo que la redundancia activa.  
- **Simplicidad:** Implementaci√≥n directa en Kubernetes.  

**Decisi√≥n:**  
Instancia Pasiva Sincronizada.  

**Sustento:**  
Proporciona alta disponibilidad sin el costo total de una redundancia activa.  
Garantiza continuidad del servicio en picos de demanda con m√≠nima p√©rdida de datos o interrupciones.

## Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo** | **Fuente del Est√≠mulo** | **Artefacto** | **Entorno** | **Respuesta** | **Medida de Respuesta** |
|--------------------|--------------------------|---------------|--------------------------|----------------|--------------|----------------|----------------|
| ESC-CCP-02 | Disponibilidad | Error en base de datos del carrito | Servidor MySQL | Repositorio de Carrito | Producci√≥n | Conmutaci√≥n a base de datos r√©plica | Recuperaci√≥n < 5 s |

**Tipo de decisi√≥n:**  
Estrategia de alta disponibilidad.

**Aplica t√©cnica de Replicaci√≥n Activa con alternativas:**  
1. Replica as√≠ncrona  
2. Replica s√≠ncrona (multi-zona)

### **T√°ctica Elegida**  
**Replicaci√≥n S√≠ncrona (Multi-Zona)**

**Contexto:**  
El carrito almacena temporalmente los productos seleccionados por el usuario. Una falla de base de datos podr√≠a causar p√©rdida de informaci√≥n y abandono de la compra. Se requiere mantener datos disponibles y consistentes en todo momento.

**Alternativas:**

**1. Replica As√≠ncrona:**  
- Sincronizaci√≥n parcial con cierto retardo.  
- Menor consumo de red, pero riesgo de p√©rdida de datos ante fallos s√∫bitos.  

**2. Replica S√≠ncrona Multi-Zona:**  
- Copia exacta en m√∫ltiples regiones de AWS.  
- Cero p√©rdida de datos garantizada.  
- Alta disponibilidad ante cortes regionales.  

**Criterios de elecci√≥n:**  
- **Disponibilidad:** SLA superior al 99.95%.  
- **Integridad:** Datos del carrito deben conservarse intactos.  
- **Recuperaci√≥n:** Failover inmediato sin intervenci√≥n manual.  
- **Costo:** Justificado por la criticidad del proceso.  

**Decisi√≥n:**  
Replicaci√≥n S√≠ncrona Multi-Zona

**Sustento:**  
Esta estrategia asegura que los datos del carrito se mantengan coherentes incluso ante fallos en una zona de disponibilidad. Permite conmutaci√≥n instant√°nea (<5 s) mediante AWS RDS Multi-AZ, garantizando cero p√©rdida de informaci√≥n y manteniendo la experiencia del usuario sin interrupciones perceptibles. Aunque implica un incremento de 25% en costos, su impacto positivo en la confiabilidad y satisfacci√≥n del cliente lo justifica plenamente.

---

##  M√≥dulo 04: Sistema de Pagos

### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo** | **Fuente del Est√≠mulo** | **Artefacto** | **Entorno** | **Respuesta** | **Medida de Respuesta** |
|--------------------|--------------------------|--------------|--------------------------|----------------|--------------|----------------|----------------|
| ESC-SP-01 | Disponibilidad | Fallo en el servidor de base de datos principal durante una transacci√≥n | Servidor Cloud | M√≥dulo de Pagos | Operaci√≥n en horario pico | El sistema conmuta autom√°ticamente a una instancia redundante sin afectar la operaci√≥n | 99.9% uptime mensual |

- Aplica t√©cnica de **Redundancia Activa (Hot Spare)** con las siguientes alternativas:
  1. Implementar heartbeat + reintentos
  2. Configurar redundancia activa con instancias paralelas

### **T√°ctica Elegida**
**Redundancia Activa (Hot Spare)**

**Contexto:**  
El m√≥dulo de pagos es cr√≠tico, y cualquier interrupci√≥n afectar√≠a el flujo de transacciones y la confianza del cliente.

**Alternativas:**
1. **Heartbeat + Reintentos:**
   - Monitoreo peri√≥dico cada 5 segundos  
   - Reintentos autom√°ticos antes de escalar la solicitud  
   - Tiempo m√°ximo de recuperaci√≥n: 3 segundos  

2. **Redundancia Activa (Hot Spare):**
   - Instancias activas simult√°neas en diferentes zonas de disponibilidad  
   - Balanceador de carga con health checks cada 10 segundos  
   - Conmutaci√≥n autom√°tica en <500 ms  

**Criterios de elecci√≥n:**
- **Escalabilidad:** Soporte para 1000+ solicitudes concurrentes  
- **Mantenibilidad:** Integraci√≥n con Kubernetes para gesti√≥n automatizada  
- **Transparencia:** Impacto nulo en experiencia de usuario durante fallos  
- **Costo:** Presupuesto aprobado para alta disponibilidad  

**Decisi√≥n:**  
Redundancia Activa (Hot Spare)

**Sustento:**  
La soluci√≥n garantiza continuidad del servicio sin interrupciones perceptibles, cumpliendo con el SLA de 99.9% uptime. Aunque requiere 40% m√°s recursos que la alternativa, justifica la inversi√≥n por el impacto cr√≠tico del m√≥dulo en el core business. La implementaci√≥n con AWS ELB y EC2 Auto Recovery asegura recuperaci√≥n autom√°tica.

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo** | **Fuente del Est√≠mulo** | **Artefacto** | **Entorno** | **Respuesta** | **Medida de Respuesta** |
|--------------------|--------------------------|--------------|--------------------------|----------------|--------------|----------------|----------------|
| ESC-SP-02 | Disponibilidad | P√©rdida temporal de conexi√≥n con el servicio externo de pagos (PayPal/Yape/Plin) | Servicio Externo | API Gateway | Producci√≥n | El sistema reintenta la conexi√≥n y almacena la transacci√≥n en cola temporal | Recuperaci√≥n exitosa < 10 s |

- Aplica t√©cnica de **Reintentos con Fila de Mensajes (Retry with Message Queue)** con las siguientes alternativas:
  1. Implementar reintentos simples
  2. Implementar RabbitMQ con almacenamiento temporal y reintentos autom√°ticos

### **T√°ctica Elegida**
**Reintentos con Fila de Mensajes (RabbitMQ)**

**Contexto:**  
El sistema depende de servicios externos que pueden sufrir ca√≠das moment√°neas. Se requiere asegurar la persistencia de las transacciones mientras el servicio externo se recupera.

**Alternativas:**
1. **Reintento Simple:**
   - Se intenta la operaci√≥n 3 veces con intervalos de 2 s  
   - No garantiza persistencia si el proceso falla  

2. **RabbitMQ con Reintentos Autom√°ticos:**
   - Persistencia temporal de las transacciones  
   - Reintentos autom√°ticos con backoff exponencial  
   - Log de errores centralizado  

**Criterios de elecci√≥n:**
- **Resiliencia:** Capacidad de recuperaci√≥n ante fallas externas  
- **Consistencia:** Evita p√©rdida de datos transaccionales  
- **Escalabilidad:** Compatible con servicios distribuidos  

**Decisi√≥n:**  
RabbitMQ con Reintentos Autom√°ticos

**Sustento:**  
Mejora la tolerancia a fallos de terceros y asegura la continuidad de las operaciones financieras. Minimiza p√©rdidas de datos y reduce la carga de reenv√≠os manuales.
  
---

##  M√≥dulo 05: Comunidad y Rese√±as
### Escenario 1: Falla del Servicio de Rese√±as

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo** | **Fuente del Est√≠mulo** | **Artefacto** | **Entorno** | **Respuesta** | **Medida de Respuesta** |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **ESC-CR-01** | **Disponibilidad** | El servicio de rese√±as deja de responder debido a una sobrecarga en su base de datos. | Falla interna del componente. | Microservicio de Cat√°logo de Juegos (consumidor). | Producci√≥n | La p√°gina de detalle de los juegos carga normalmente, mostrando un mensaje controlado en la secci√≥n de rese√±as en lugar de fallar por completo. | El tiempo de carga de la p√°gina del juego no aumenta m√°s de un 5%. La tasa de error del servicio de Cat√°logo no se ve afectada. |

- Aplica t√©cnica de **Resistir Fallos** con alternativas:
    1.  Llamadas s√≠ncronas sin protecci√≥n.
    2.  Implementaci√≥n del patr√≥n Circuit Breaker.

### T√°ctica Elegida
Patr√≥n de Interruptor de Circuito (Circuit Breaker).

**Contexto:**
El servicio de rese√±as es importante, pero no es cr√≠tico para la funci√≥n principal de vender juegos. Una falla en este servicio secundario no debe impedir que un usuario compre un juego. Se debe evitar una falla en cascada. ‚õìÔ∏è

**Alternativas:**
1.  **Llamadas S√≠ncronas sin Protecci√≥n (F√°cil pero Peligroso):**
    - El servicio de Cat√°logo llama al servicio de Rese√±as y espera una respuesta.
    - Si el servicio de Rese√±as no responde (timeout), el hilo de ejecuci√≥n en el servicio de Cat√°logo se queda bloqueado.
    - **Vulnerabilidad:** M√∫ltiples peticiones concurrentes a p√°ginas de juegos agotar√≠an todos los hilos del servicio de Cat√°logo, provocando su ca√≠da total.

2.  **Implementaci√≥n del Circuit Breaker (Moderada y Elegida):**
    - Se utiliza una librer√≠a como `opossum` (Node.js) para envolver las llamadas al servicio de Rese√±as.
    - Despu√©s de un n√∫mero configurable de fallos, el "circuito se abre" y las llamadas posteriores fallan inmediatamente sin intentar contactar al servicio ca√≠do.
    - Pasado un tiempo, el circuito entra en estado "semiabierto", permitiendo una llamada de prueba para verificar si el servicio se ha recuperado.

**Criterios de elecci√≥n:**
- **Aislamiento de Fallos:** Prevenir que el fallo de un servicio se propague a otros.
- **Recuperaci√≥n R√°pida:** Permitir que el sistema se recupere una vez que el servicio dependiente vuelve a estar en l√≠nea.
- **Experiencia de Usuario:** Ofrecer una experiencia degradada pero funcional en lugar de un error completo.

**Decisi√≥n:**
Implementaci√≥n del patr√≥n Circuit Breaker.

**Sustento:**
El Circuit Breaker es una t√°ctica fundamental para construir sistemas de microservicios resilientes. Protege a los servicios consumidores de fallos en sus dependencias, asegurando que el sistema en su conjunto permanezca disponible y funcional.



[üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../5.7.2/5.7.2.md)
