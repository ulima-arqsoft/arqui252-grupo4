# 2.2. Requisitos de Atributos de Calidad (Escenarios por Módulo)

El siguiente catálogo presenta 30 escenarios estructurados (ESC-01 a ESC-30) que ejemplifican requisitos de calidad en sistemas software.  En la carpeta [QAW](./QAW/S03-2 QAW.xlsx) se encuentra todo el proceso detallado que se llevo con el fin de obtener la presente de tabla de los escenarios de calidad refinados.

| ID Escenario | Atributo de Calidad | Fuente de Estímulo | Estímulo | Artefacto | Entorno | Respuesta Esperada | Métrica (Respuesta) |
|---------------|--------------------|--------------------|-----------|------------|----------|---------------------|----------------------|
| **ESC-02** | Usabilidad | Usuario | Introduce credenciales incorrectas en el formulario de login. | Widget de Login Universal **(Auth0)** | Producción | Auth0 muestra un mensaje de error claro e inmediato ("Usuario o contraseña incorrectos"). | El 100% de los intentos fallidos reciben feedback en < 1s. |
| **ESC-10** | Confiabilidad | | **ESC-10** | Usuario | Un usuario, debido a una red lenta, hace doble clic en el botón "Confirmar Pago". | Microservicio de Pagos (Lógica de Idempotencia) | Producción | El sistema procesa la primera solicitud, pero identifica y rechaza la segunda como un duplicado, garantizando un único cobro. | El **100% de las solicitudes duplicadas** para la misma orden son rechazadas. |
| **ESC-01** | Usabilidad | Usuario | Realiza una búsqueda combinando 3 filtros (género, plataforma, etiqueta). | Motor de Búsqueda (Elasticsearch) | Producción | El sistema es eficiente y fácil de usar, devolviendo resultados precisos. | El 95% de los usuarios completan la búsqueda en < 3s. |
| **ESC-05** | Seguridad | Actor malicioso (externo) | Intento de pago con una tarjeta de crédito previamente reportada como fraudulenta. | Microservicio de Pagos / Sistema Antifraude | Producción | La transacción es rechazada automáticamente y se genera una alerta de seguridad interna. | El **100% de los intentos** con tarjetas en la lista negra son bloqueados. |
| **ESC-24** | Disponibilidad |Falla interna | El clúster de Elasticsearch (motor de búsqueda) deja de responder. | Microservicio de Catálogo | Producción | La funcionalidad de búsqueda se deshabilita con un mensaje claro, pero el resto del catálogo sigue operativo. | Las páginas de detalle de productos mantienen un 100% de disponibilidad. |
| **ESC-07** | Rendimiento | Usuario | Se autentica exitosamente en Auth0 usando la opción "Login con Google". | API Gateway + Microservicio GU | Producción | El sistema valida el token de Auth0 y establece la sesión interna del usuario rápidamente. | El tiempo total desde el callback de Auth0 hasta que el usuario tiene una sesión activa es < 1.5 segundos. |
| **ESC-09** | Disponibilidad | API externa (Proveedor de pago) | Falla de red intermitente al procesar una transacción. | Sistema de colas de mensajes (asíncrono) | Producción | El sistema reintenta procesar el pago automáticamente hasta 3 veces en un lapso de 5 minutos. | **99% de las transacciones** con fallos intermitentes se completan exitosamente. |
| **ESC-03** | Usabilidad | Usuario | Comete un error tipográfico al buscar un juego (ej. "halof"). | Motor de Búsqueda (Elasticsearch) | Producción | El sistema muestra la sugerencia: “¿Quisiste decir: ‘halo’?”. | El 90% de las sugerencias son correctas. |
| **ESC-12** | Confiabilidad | Usuario | Busca un producto usando mayúsculas y minúsculas de forma inconsistente (ej. "cyBeRpUnK"). | Motor de Búsqueda (Elasticsearch) | Producción | El sistema devuelve los resultados correctos para "Cyberpunk", ignorando las mayúsculas/minúsculas. | El 100% de las búsquedas son insensibles a mayúsculas/minúsculas. |
| **ESC-06** | Seguridad | Actor malicioso | Realiza 10 intentos de login fallidos desde la misma dirección IP en 1 minuto. | Plataforma **Auth0** (Attack Protection) | Producción | Auth0 bloquea temporalmente la dirección IP para que no pueda realizar más intentos de login. | El 100% de las IPs con comportamiento anómalo son bloqueadas. |
| **ESC-04** | Usabilidad | Usuario | Completa el flujo de "Olvidé mi contraseña" en la interfaz de Auth0. | Flujo de Recuperación **(Auth0)** | Producción | El usuario es redirigido de vuelta a GameVault y puede iniciar sesión con su nueva contraseña. | El 98% de los usuarios completan el flujo de recuperación sin asistencia. |
| **ESC-08** |Rendimiento| Herramienta de Carga | **15 usuarios creando pedidos simultáneamente.** | Microservicio de **Pedidos** | Producción | El endpoint de creación de pedidos responde en menos de 5 segundos. | **95% de los pedidos se crean exitosamente** bajo la carga definida. |
| **ESC-11** | Mantenibilidad | Desarrollador | Se solicita añadir un nuevo campo (`payment_method_id`) a la tabla de transacciones de pago. | ORM / Esquema de la BD de Pagos | Desarrollo | La migración de la base de datos se aplica y las pruebas de integración específicas de pago se ejecutan sin fallos. | El cambio se completa en **menos de 2 horas-hombre** y el **100% de las pruebas pasan**. |
| **ESC-13** | Seguridad | Usuario malintencionado | Un usuario envía una reseña que contiene lenguaje inapropiado o enlaces de spam. | Microservicio CR (Sistema de Moderación) | Producción | La reseña es automáticamente marcada como "pendiente de revisión" y no se publica. | El 95% de las reseñas con palabras de una lista negra son correctamente retenidas. |
| **ESC-14** | Rendimiento | Usuario | Carga una página de producto que tiene más de 1000 reseñas. | Frontend + API del Microservicio CR | Producción | La página del producto carga rápido. Las reseñas se cargan de forma asíncrona ("lazy loading") al hacer scroll. | El tiempo de carga inicial de la página no se ve afectado por el número de reseñas. |
| **ESC-18** | Escalabilidad | Carga de datos masiva | El catálogo de productos crece de 10,000 a 1 millón de ítems. | Elasticsearch / Base de Datos | Producción | El rendimiento de las búsquedas y filtros se mantiene estable a pesar del aumento de datos. | El tiempo de respuesta de las búsquedas se mantiene < 3s. |
| **ESC-19** | Disponibilidad | Simulador de Red | Se pierde la conexión al intentar **crear un pedido**. | **Mecanismo de guardado local** (Service Worker / PWA) | Producción | El sistema notifica al usuario: “Sin conexión. Tu pedido se guardó como borrador y se enviará al reconectar.” | **100% de los pedidos** intentados sin conexión se guardan localmente. |
| **ESC-20** | Rendimiento | Carga de eventos masiva | El número de eventos en Kafka aumenta 10x durante una hora. | Consumidor de Kafka (Python) | Producción | El servicio procesa los eventos sin acumular un retraso (lag) significativo. | El lag del consumidor de Kafka se mantiene < 5 minutos. |
| **ESC-21** | Usabilidad | Usuario | Mueve un juego del carrito a la "Lista de Deseos". | Lógica de Negocio (Backend) | Producción | El juego se elimina del carrito y se añade a la lista de deseos en la base de datos. Se muestra una confirmación visual. | **100% de las solicitudes** se completan correctamente a nivel de datos. |
| **ESC-22** | Mantenibilidad | Desarrollador | Se necesita cambiar el proveedor de identidad de Auth0 a otro en el futuro. | API Gateway / Lógica de Autenticación | Desarrollo | El cambio se puede realizar modificando únicamente el `AuthAdapter`, sin impactar la lógica de negocio. | El esfuerzo de migración se reduce en un 70% gracias a la abstracción. |
| **ESC-23** | Mantenibilidad | Desarrollador | El negocio solicita cambiar el proveedor de logística principal (ej. de Olva a Shalom). | Microservicio de Pedidos (Adapter de Logística) | Tiempo de diseño y desarrollo | Se implementa un nuevo adaptador para el proveedor Shalom sin afectar la lógica de creación de pedidos. | La integración del nuevo proveedor se completa en menos de 8 horas-hombre. |
| **ESC-28** | Funcionalidad | Usuario | El usuario solicita exportar su historial de pagos de los últimos 6 meses. | Microservicio de Reportes de Pagos | Producción | Se genera un archivo en formato **PDF/A-1b** que contiene la fecha, monto y estado de cada transacción. | El **100% de los reportes generados son válidos** y contienen los datos correctos del período solicitado. |
| **ESC-29** | Funcionalidad | Usuario | Solicita la **generación de la factura** para un pedido completado. | Generador de Reportes (PDF) | Producción | Se genera un archivo PDF en formato PDF/A-1b que contiene todos los datos fiscales y del pedido. | **100% de las facturas generadas son válidas** y contienen los datos correctos. |
| **ESC-30** |Usuario | Intenta iniciar sesión desde diferentes navegadores y sistemas operativos (Chrome, Firefox, Safari). | Integración Frontend con Auth0.js SDK | Producción | El widget de login de Auth0 se renderiza y funciona correctamente en todos los entornos soportados. | La tasa de éxito de inicio de sesión es > 99.9% en todos los navegadores principales. |
| **ESC-15** | Seguridad | Usuario no autorizado | Un usuario con rol de "vendedor" intenta acceder al reporte de "Ventas Totales Mensuales". | API Gateway / Microservicio ADR | Producción | El sistema valida el rol del token (Auth0) y deniega el acceso con un error 403 Forbidden. | El 100% de los intentos de acceso por roles no autorizados son bloqueados. |
| **ESC-16** | Mantenibilidad | Desarrollador | Se solicita un nuevo reporte: "Productos más vistos por categoría". | Código del Microservicio ADR (Python) | Desarrollo | Un desarrollador implementa la nueva lógica y genera el reporte. | El tiempo para implementar el nuevo reporte es < 8 horas-hombre. |
| **ESC-17** | Confiabilidad | Equipo de Negocio | Se compara el reporte de "Ventas Totales" con la BD de producción. | Lógica de Agregación (Pandas) | Producción | Los totales de ambos sistemas coinciden, demostrando precisión. | La discrepancia entre el reporte y la fuente de verdad es < 0.1%. |
| **ESC-25** | Rendimiento | Scripts de QA (Pruebas de Carga) | Se envían 10 solicitudes por minuto al endpoint `/payment`. | Rate Limiter del API Gateway | Producción | Las primeras 3 solicitudes son exitosas (código 200), las siguientes reciben un error `429 Too Many Requests`. | El **100% de las solicitudes** que exceden el límite son bloqueadas con el código 429. |
| **ESC-26** | Usabilidad | Usuario | El usuario introduce un número de tarjeta de crédito inválido y presiona "Pagar". | Formulario de Pago (Frontend) | Producción | El sistema muestra un mensaje de error claro ("Número de tarjeta inválido") en **menos de 500ms** y no intenta procesar el pago. | El **100% de los formatos de tarjeta inválidos** son detectados en el cliente sin enviar la solicitud. |
| **ESC-27** | Disponibilidad |Falla interna | El microservicio de ADR crashea y es reiniciado por Kubernetes. | Consumidor de Kafka (offset) | Producción |Al reiniciarse, el servicio continúa procesando desde el último punto. | 0 eventos perdidos después de la recuperación del servicio. |
| **ESC-32**| Disponibilidad |Falla interna del sistema | El microservicio de Reseñas se cae o deja de responder por un error. | Microservicio de Catálogo (el que lo consume) | Producción | La página del juego carga correctamente, mostrando un mensaje de "reseñas no disponibles" en lugar de un error. | La caída del servicio de reseñas no aumenta la tasa de error del resto del sitio. |
| **ESC-31**| Usabilidad | Usuario | Está escribiendo una reseña larga y su navegador se cierra accidentalmente. | Editor de texto enriquecido + BD (MongoDB) | Producción | Al volver a abrir la página, el sistema restaura el borrador de la reseña que se guardó automáticamente. | El 99% de los borradores se guardan y restauran con éxito. |