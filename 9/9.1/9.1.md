> [9. Metodolog√≠a de Dise√±o de Arquitectura - Aplicaci√≥n de ADD](../9.md) ‚Ä∫ [9.1. Revisi√≥n de Entradas](9.1.md)

# 9.1. Revisi√≥n de Entradas

## Funcionalidades primarias (Casos de uso)

| ID | M√≥dulo | Nombre | Historia de Usuario |
| :--- | :--- | :--- | :--- |
| **CU-01** | Gesti√≥n de Usuarios | Registro de usuario | Yo, como visitante, quiero registrarme en la plataforma para crear una cuenta y poder comprar videojuegos. |
| **CU-02** | Gesti√≥n de Usuarios | Autenticaci√≥n de usuario | Yo, como usuario, quiero iniciar sesi√≥n con mis credenciales para acceder a mi cuenta y datos privados de forma segura. |
| **CU-03** | Gesti√≥n de Usuarios | Gesti√≥n de perfil | Yo, como cliente, quiero editar mi informaci√≥n personal y preferencias para mantener mi perfil actualizado. |
| **CU-04** | Gesti√≥n de Usuarios | Bloqueo de usuarios | Yo, como administrador, quiero bloquear el acceso a usuarios que infrinjan las normas para proteger la comunidad. |
| **CU-05** | Cat√°logo de Productos | B√∫squeda y filtrado | Yo, como usuario, quiero buscar juegos por nombre y aplicar filtros (g√©nero, precio) para encontrar r√°pidamente lo que me interesa. |
| **CU-06** | Cat√°logo de Productos | Visualizaci√≥n de detalle | Yo, como usuario, quiero ver la ficha t√©cnica, precio y capturas de un juego para decidir si lo compro. |
| **CU-07** | Cat√°logo de Productos | Administraci√≥n del cat√°logo | Yo, como administrador, quiero crear, editar o eliminar juegos del sistema para mantener la oferta actualizada. |
| **CU-08** | Carrito y Pedidos | Gesti√≥n del carrito | Yo, como cliente, quiero agregar o quitar juegos de mi carrito de compras para seleccionar lo que voy a adquirir. |
| **CU-09** | Carrito y Pedidos | Realizar Checkout | Yo, como cliente, quiero finalizar mi compra confirmando los √≠tems y el pago para obtener mis juegos. |
| **CU-10** | Carrito y Pedidos | Historial de pedidos | Yo, como cliente, quiero visualizar mis compras pasadas. |
| **CU-11** | Sistema de Pagos | Procesamiento de pago | Yo, como cliente, quiero procesar mi pago a trav√©s de una pasarela segura para completar la transacci√≥n comercial. |
| **CU-12** | Sistema de Pagos | Gesti√≥n de m√©todos de pago | Yo, como cliente, quiero guardar o eliminar mis tarjetas para agilizar mis futuras compras. |
| **CU-13** | Sistema de Pagos | Procesamiento de reembolso | Yo, como administrador, quiero procesar reembolsos monetarios para resolver reclamos justificados de los clientes. |
| **CU-14** | Comunidad y Rese√±as | Publicaci√≥n de rese√±a | Yo, como cliente, quiero publicar una opini√≥n y calificaci√≥n sobre un juego comprado para compartir mi experiencia. |
| **CU-15** | Comunidad y Rese√±as | Votaci√≥n de utilidad | Yo, como cliente, quiero votar si una rese√±a es √∫til o no para destacar el contenido de valor en la plataforma. |
| **CU-16** | Comunidad y Rese√±as | Moderaci√≥n de contenido | Yo, como administrador, quiero revisar y eliminar contenido reportado para mantener un ambiente seguro y libre de spam. |
| **CU-17** | Comunidad y Rese√±as | Participaci√≥n en foros | Yo, como usuario, quiero crear o responder temas en los foros de discusi√≥n para interactuar con otros jugadores. |
| **CU-18** | An√°lisis y Reportes | Reporte de ventas | Yo, como administrador, quiero visualizar los ingresos generados por periodo para analizar el rendimiento del negocio. |
| **CU-19** | An√°lisis y Reportes | Visualizaci√≥n de Top Productos | Yo, como administrador, quiero ver el ranking de juegos m√°s vendidos y mejor calificados para identificar tendencias. |
| **CU-20** | An√°lisis y Reportes | An√°lisis de usuarios | Yo, como administrador, quiero ver m√©tricas de comportamiento de usuarios para entender mejor a la audiencia. |

## Escenarios de Atributos de Calidad

| ID | Atributo de Calidad | Fuente Est√≠mulo | Est√≠mulo | Artefacto Tecnol√≥gico | Entorno | Respuesta del Sistema | Medida de Respuesta | Casos de uso relacionados |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **QA-01** | **Seguridad** | Atacante | Intento de inyecci√≥n de script (XSS) en el texto de una rese√±a | Node.js + DOMPurify + Middleware de validaci√≥n | Producci√≥n | Sistema sanitiza la entrada eliminando tags maliciosos antes de guardar en BD | 0 scripts ejecutados, sanitizaci√≥n en ‚â§20ms | CU-14 |
| **QA-02** | **Rendimiento** | Usuarios Concurrentes | 10,000 usuarios consultan las rese√±as de un juego "AAA" reci√©n lanzado | Redis Cache + Node.js API + MongoDB | Producci√≥n (Pico) | Sistema sirve las rese√±as y el promedio de calificaci√≥n desde la cach√© | Latencia P95 ‚â§ 200ms, Hit rate de cach√© ‚â• 90% | CU-06, CU-14 |
| **QA-03** | **Disponibilidad** | Sistema | El microservicio de "Comunidad y Rese√±as" deja de responder por sobrecarga | API Gateway + Circuit Breaker (Resilience4j) | Producci√≥n | La p√°gina del juego se carga mostrando la info del producto, ocultando la secci√≥n de rese√±as | Fallo controlado (Fallback) visible en ‚â§50ms, navegaci√≥n no interrumpida | CU-06 |
| **QA-04** | **Escalabilidad** | Tr√°fico Masivo | Aumento s√∫bito de escrituras (500 rese√±as/min) tras un evento en vivo | RabbitMQ + Workers as√≠ncronos + MongoDB | Producci√≥n | Las rese√±as se encolan y se confirman al usuario ("Procesando...") sin bloquear la BD | Usuario recibe confirmaci√≥n en ‚â§1s, consistencia eventual en ‚â§5s | CU-14 |
| **QA-05** | **Usabilidad** | Usuario | Usuario con conexi√≥n lenta vota "√ötil" en una rese√±a ajena | React (Optimistic UI) + Node.js API | Producci√≥n | La interfaz actualiza el contador visualmente de inmediato antes de la confirmaci√≥n del servidor | Feedback visual en ‚â§100ms (percibido como instant√°neo) | CU-15 |
| **QA-06** | **Seguridad** | Bot / Script | Intento de publicar 50 rese√±as falsas en 1 minuto desde la misma IP | API Gateway + Redis Rate Limiter | Producci√≥n | Sistema bloquea las peticiones excedentes retornando error HTTP 429 | Bloqueo efectivo al superar umbral, respuesta de error ‚â§10ms | CU-14 |
| **QA-07** | **Modificabilidad** | Equipo Producto | Solicitud de a√±adir "Reacciones con Emojis" a las rese√±as existente | Microservicio Rese√±as (Arquitectura Hexagonal) | Desarrollo | Se a√±ade la nueva entidad y endpoints sin romper la funcionalidad de "Voto √ötil" | Implementaci√≥n en ‚â§3 d√≠as dev, 0 regresiones en API actual | CU-15 |
| **QA-08** | **Integridad** | Administrador | Generaci√≥n de reporte complejo "Juegos mejor calificados del mes" | PostgreSQL Read Replica / Vistas Materializadas | Producci√≥n | La consulta se ejecuta en la r√©plica sin afectar el rendimiento del carrito de compras | Reporte generado en ‚â§5s, 0 impacto en latencia de usuarios finales | CU-19 |
| **QA-09** | **Privacidad** | Usuario | Usuario solicita "Derecho al olvido" (Eliminar cuenta y rese√±as) | Node.js + MongoDB Transaction + Script de anonimizaci√≥n | Producci√≥n | Sistema elimina datos personales y anonimiza las rese√±as p√∫blicas | Proceso completo en ‚â§24h, cumplimiento GDPR | CU-03 |
| **QA-10** | **Interoperabilidad** | Sistema Externo | Pasarela de pago confirma transacci√≥n exitosa | Webhooks + Payment Service + Kafka | Producci√≥n | El sistema de pagos notifica y libera la clave del juego autom√°ticamente | Notificaci√≥n procesada y clave entregada en ‚â§3s tras pago | CU-11, CU-10 |
| **QA-11** | **Testabilidad** | Desarrollador | Ejecuci√≥n de pruebas de regresi√≥n para el m√≥dulo de moderaci√≥n | Jest + Entorno Dockerizado (Testcontainers) | CI/CD | Las pruebas se ejecutan aisladas con base de datos ef√≠mera | Suite completa ejecuta en ‚â§2min, cobertura ‚â•85% | CU-16 |
| **QA-12** | **Usabilidad** | Usuario | B√∫squeda de juego con error tipogr√°fico ("Elden Rung") | Elasticsearch (Fuzzy Search) + Node.js | Producci√≥n | Sistema sugiere "¬øQuisiste decir: Elden Ring?" y muestra resultados relevantes | Sugerencia pertinente en el 1er intento, respuesta ‚â§1.5s | CU-05 |
| **QA-13** | **Disponibilidad** | Infraestructura | Ca√≠da de un nodo del cl√∫ster de base de datos de usuarios | MongoDB Replica Set (Primary/Secondary) | Producci√≥n | El sistema promueve autom√°ticamente un nodo secundario a primario | Failover autom√°tico en ‚â§30s, servicio contin√∫a operando | CU-02, CU-03 |
| **QA-14** | **Seguridad** | Usuario | Usuario intenta acceder a panel de administraci√≥n sin rol de admin | Auth0 + Middleware de Roles (RBAC) | Producci√≥n | Sistema deniega acceso y registra el intento de seguridad | Respuesta HTTP 403 Forbidden inmediata, log de auditor√≠a creado | CU-07, CU-16 |
| **QA-15** | **Rendimiento** | Usuario | Carga de p√°gina de historial con 500 juegos comprados | React + Paginaci√≥n (GraphQL/REST) + Node.js | Producci√≥n | Sistema carga solo los primeros 20 juegos y carga el resto bajo demanda | Tiempo de carga inicial (LCP) ‚â§2.5s | CU-10 |
| **QA-16** | **Seguridad** | Botnet | Ataque DDoS  contra el API Gateway | WAF (Web Application Firewall) + CDN (Cloudflare) | Producci√≥n | El WAF filtra tr√°fico malicioso en el borde (edge) permitiendo solo tr√°fico leg√≠timo | Mitigaci√≥n autom√°tica en ‚â§60s, Disponibilidad ‚â•99.5% | Todos |


## Restricciones

## Restricciones

| ID | Nombre | Descripci√≥n |
| :--- | :--- | :--- |
| **CON01** | Stack Tecnol√≥gico | El frontend debe desarrollarse en **React con TypeScript** y los microservicios del backend en **Node.js** (Express/NestJS) o Python (para servicios espec√≠ficos de datos). |
| **CON02** | Arquitectura de Microservicios | El sistema debe implementarse obligatoriamente bajo una **arquitectura de microservicios** desacoplados. |
| **CON03** | Persistencia Pol√≠glota | Se debe utilizar la base de datos adecuada para cada servicio: **PostgreSQL** (Relacional), **MongoDB** (Documental), **Elasticsearch** (B√∫squeda) y **Redis** (Cach√©). |
| **CON04** | Patr√≥n de Base de Datos por Servicio | Cada microservicio debe ser propietario de sus datos y tener su **propia instancia o esquema de base de datos**; est√° prohibido compartir bases de datos entre servicios. |
| **CON05** | Comunicaci√≥n H√≠brida | La comunicaci√≥n debe ser **s√≠ncrona (REST)** para interacciones con el cliente y **as√≠ncrona (Kafka/RabbitMQ)** para procesos en segundo plano (an√°lisis, notificaciones). |
| **CON06** | Autenticaci√≥n Delegada | La gesti√≥n de identidad y control de acceso debe delegarse exclusivamente a **Auth0** (est√°ndar OAuth 2.0 / OIDC). |
| **CON07** | Orquestaci√≥n de Contenedores | Todos los servicios deben estar "dockerizados" y la orquestaci√≥n en producci√≥n debe realizarse mediante **Kubernetes**. |
| **CON08** | Pasarela de Pagos Externa | El procesamiento de transacciones financieras no debe almacenarse localmente, sino delegarse a pasarelas externas (**PayPal, Stripe, Yape**). |
| **CON09** | API Gateway √önico | Todo el tr√°fico externo debe ingresar a trav√©s de un √∫nico **API Gateway**, prohibiendo el acceso directo a los microservicios. |

## Preocupaciones a Nivel de Arquitectura

## Preocupaciones Arquitect√≥nicas

| ID | Nombre | Descripci√≥n |
| :--- | :--- | :--- |
| **CRN01** | **Rendimiento de B√∫squeda y Filtrado** | Garantizar tiempos de respuesta sub-segundo en el cat√°logo de productos (usando Elasticsearch) ante consultas complejas con m√∫ltiples facetas (precio, g√©nero, plataforma) y alto volumen de usuarios. |
| **CRN02** | **Consistencia Transaccional Distribuida** | Asegurar la integridad de los datos entre el cobro (Pasarela), la generaci√≥n de la orden (Pedido) y la asignaci√≥n de la clave del juego (Inventario), evitando ventas de stock inexistente. |
| **CRN03** | **Gesti√≥n de Picos de Tr√°fico (Lanzamientos)** | El sistema debe soportar aumentos repentinos y masivos de tr√°fico (10x-50x) durante lanzamientos de juegos "AAA" o eventos de ofertas, escalando el√°sticamente sin intervenci√≥n manual. |
| **CRN04** | **Desacoplamiento de Anal√≠tica** | Asegurar que el procesamiento masivo de datos para reportes y an√°lisis (v√≠a Kafka) no impacte en absoluto el rendimiento de los servicios transaccionales cr√≠ticos (Checkout y Login). |
| **CRN05** | **Seguridad en Contenido de Usuario (UGC)** | Implementar mecanismos robustos de sanitizaci√≥n y moderaci√≥n automatizada para prevenir inyecciones (XSS) y spam en el m√≥dulo de rese√±as y comunidad. |
| **CRN06** | **Resiliencia ante Fallos Externos** | Dise√±ar el sistema para tolerar ca√≠das de servicios de terceros (Pasarelas de Pago, Auth0, Servicios de Log√≠stica) sin que la aplicaci√≥n colapse, utilizando patrones como Circuit Breaker. |
| **CRN07** | **Sincronizaci√≥n de Datos Pol√≠glota** | Gestionar la complejidad de mantener datos sincronizados entre diferentes tecnolog√≠as de base de datos (PostgreSQL, MongoDB, Elasticsearch) y la cach√© (Redis). |
| **CRN08** | **Latencia entre Microservicios** | Minimizar el *overhead* de latencia introducido por las llamadas de red entre m√∫ltiples microservicios (API Gateway ‚Üí Cat√°logo ‚Üí Rese√±as) para mantener una experiencia de usuario fluida. |
| **CRN09** | **Gesti√≥n de Identidad Centralizada** | Asegurar que la propagaci√≥n del token de autenticaci√≥n (JWT de Auth0) sea segura y eficiente a trav√©s de todos los microservicios para mantener un control de acceso consistente (RBAC). |
---

[üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../9.2/9.2.md)
