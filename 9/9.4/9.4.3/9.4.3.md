> [9. Metodolog√≠a de Dise√±o de Arquitectura - Aplicaci√≥n de ADD](../../9.md) ‚Ä∫ [9.4. Iteraci√≥n 3: Refinar estructuras para abordar el atributo de calidad m√°s importante](../9.4.md) ‚Ä∫ [9.4.3. Conceptos de dise√±o](9.4.3.md)

# 9.4.3. Conceptos de dise√±o

| C√≥digo | Decisi√≥n de Dise√±o | Fundamentaci√≥n |
| :--- | :--- | :--- |
| **DEC-20** | Validaci√≥n Centralizada de JWT en API Gateway | Descarga a los microservicios de la validaci√≥n de firma del token. El Gateway verifica la autenticidad con Auth0 antes de dejar pasar la petici√≥n, cumpliendo con **CON09** y **CRN09**. |
| **DEC-21** | Implementaci√≥n de RBAC (Role-Based Access Control) | Se definen roles estrictos (Cliente, Admin) en el token JWT. Los microservicios validan estos "scopes" para autorizar operaciones cr√≠ticas como reembolsos (CU-13) o bloqueo de usuarios (CU-04), satisfaciendo **QA-14**. |
| **DEC-22** | Sanitizaci√≥n de Inputs en Capa de Controlador | Implementar middleware de limpieza (ej. DOMPurify) en el Servicio de Comunidad para eliminar scripts maliciosos de las rese√±as antes de guardarlas, mitigando vulnerabilidades XSS (**QA-01**, **CRN05**). |
| **DEC-23** | Validaci√≥n de Firmas Criptogr√°ficas en Webhooks | El Servicio de Pagos verificar√° la firma HMAC enviada por Culqi en cada webhook para asegurar que la notificaci√≥n de pago es leg√≠tima y no un ataque de "replay" o falsificaci√≥n (**QA-10**). |
| **DEC-24** | Rate Limiting Distribuido con Redis | Implementar l√≠mites de velocidad por IP y Usuario en el Gateway, utilizando Redis para mantener el contador. Esto protege contra ataques de fuerza bruta y bots de spam (**QA-06**, **QA-16**). |
| **DEC-25** | Encriptaci√≥n de Datos en Reposo (Data at Rest Encryption) | Activar el cifrado transparente de datos (TDE) en las instancias de PostgreSQL (Pagos/Usuarios) para proteger la informaci√≥n sensible en caso de acceso f√≠sico al disco (**QA-09**). |

---

[‚¨ÖÔ∏è Anterior](../9.4.2/9.4.2.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../9.4.4/9.4.4.md)