> [0. Acerca del Grupo](../../0.md) ‚Ä∫ [0.8. Temas Individuales (Parte 2)](../0.8.md) ‚Ä∫ [0.8.4. Integrante 4](0.8.4.md)

# 0.8.4. Integrante 4

## 1.¬øQu√© es Seguridad de Contenedores?

La pr√°ctica de proteger el **ciclo de vida** de las aplicaciones basadas en contenedores. Abarca todas las etapas, desde la imagen de la aplicaci√≥n (Build) hasta su ejecuci√≥n en el orquestador (Runtime).

Se centra en asegurar:

* La aplicaci√≥n (el c√≥digo).
* La imagen (el paquete inmutable).
* El registro (el repositorio donde se guarda la imagen).
* El *runtime* (el motor de contenedores como Docker).
* El entorno de orquestaci√≥n (Kubernetes).

**No es solo seguridad a nivel de aplicaci√≥n (AppSec).** Es una disciplina que fusiona **AppSec**, **seguridad de infraestructura** y **seguridad de red** para crear una defensa profunda.

---

## 2. ¬øCu√°l es su uso?

La necesidad de una defensa profunda se justifica por:

* **Superficie de Ataque Aumentada:** Los microservicios significan m√°s componentes (im√°genes, pods, servicios) que asegurar. Un contenedor fallido puede comprometer el host.
* **Naturaleza Inmutable:** Los contenedores son ef√≠meros y cambian r√°pidamente. La seguridad debe ser autom√°tica e integrada en la pipeline CI/CD (DevSecOps).
* **Problema de Privilegios:** Por defecto, muchos procesos intentan ejecutarse como root. Un compromiso significa escalada de privilegios y control total del sistema.
* **Cumplimiento Normativo (Compliance):** En sectores regulados (finanzas, salud), es obligatorio asegurar el aislamiento y la inmutabilidad de los datos y el c√≥digo.

---

## 3. ¬øEn qu√© casos se usa?

La seguridad de contenedores es indispensable en **todo entorno de microservicios**, pero es cr√≠tica en los siguientes escenarios:

* **Sistemas de E-commerce y Finanzas:** Como nuestra demo de sistema de compras, donde la exfiltraci√≥n de datos (tarjetas de cr√©dito, datos personales) es el riesgo principal y m√°s da√±ino.

* **Infraestructuras de Producci√≥n (24/7):** Cualquier aplicaci√≥n cr√≠tica que necesite alta disponibilidad y aislamiento robusto para evitar que un fallo de seguridad tumbe el servicio.

* **Ambientes Regulados (HIPAA, PCI DSS):** Donde existe la necesidad legal de demostrar la separaci√≥n de responsabilidades, el control de acceso y la inmutabilidad del c√≥digo y los datos.

* **Uso de Im√°genes de Terceros:** Cuando se usan im√°genes base de Docker Hub o *open source* (como Node, Python, Nginx), es fundamental escanearlas antes de usarlas para detectar vulnerabilidades preexistentes.

---

## 4. Objetivos Clave

| Pilar | Objetivo | Tarea Clave |
| :--- | :--- | :--- |
| **Build** | Minimizar la superficie de ataque de la imagen. | **Escaneo de Vulnerabilidades (Trivy):** Identificar CVEs en im√°genes base y dependencias. |
| **Configuraci√≥n** | Asegurar que los secretos nunca se expongan en el c√≥digo. | **Secrets Management:** Inyectar claves (DB_PASS, API_KEY) en tiempo de ejecuci√≥n. |
| **Runtime** | Restringir las acciones del contenedor en vivo. | **Aislamiento de Red:** Aplicar Network Policies (limitar el tr√°fico Egress). |

---

## 5. Beneficios y Limitaciones

### Beneficios

* **Mayor Aislamiento:** Los contenedores est√°n aislados a nivel de proceso (Namespaces y cgroups), limitando la propagaci√≥n de un ataque.
* **Inmutabilidad:** Una vez construida y escaneada, la imagen no cambia, lo que simplifica la validaci√≥n de seguridad.
* **Automatizaci√≥n (DevSecOps):** La seguridad se integra directamente en la pipeline CI/CD (ej. el escaneo de Trivy detiene el build si hay CVEs cr√≠ticas).
* **Cumplimiento Normativo:** Facilita el cumplimiento de est√°ndares al aplicar pol√≠ticas de forma centralizada (ej. Network Policies en todo el cl√∫ster).


### Limitaciones

* **Falta de Visibilidad en Runtime:** La naturaleza ef√≠mera de los contenedores dificulta el monitoreo de actividad sospechosa en tiempo real.
* **Complejidad de la Orquestaci√≥n:** Kubernetes requiere un alto nivel de conocimiento para configurar correctamente pol√≠ticas como Network Policies y Security Contexts.
* **Seguridad del Host:** La seguridad del contenedor depende de la seguridad del sistema operativo host (kernel). Una vulnerabilidad a nivel de kernel puede afectar a todos los contenedores.
* **Problemas de "Trust" en Im√°genes Base:** Si la imagen base est√° comprometida (Supply Chain Attack), todas las im√°genes construidas sobre ella tambi√©n lo estar√°n.
***

### 7. Requisitos para ejecutar la demostraci√≥n

Para replicar esta demostraci√≥n de seguridad, es necesario contar con las siguientes herramientas instaladas y configuradas:

* **Docker Desktop:** Motor de contenedores necesario para construir im√°genes y ejecutar el cl√∫ster local.
* **Minikube:** Herramienta para ejecutar un cl√∫ster de Kubernetes de un solo nodo localmente.
* **Kubectl:** L√≠nea de comandos oficial para interactuar con el cl√∫ster de Kubernetes.
* **Trivy:** Esc√°ner de seguridad integral para detectar vulnerabilidades en im√°genes de contenedores y sistemas de archivos.
* **Visual Studio Code (VS Code):** Entorno de desarrollo integrado, recomendado por su terminal integrada para ejecutar comandos de PowerShell/Bash.

---

### 8. Conclusiones

La seguridad de contenedores no es un producto que se instala, sino un proceso continuo que debe integrarse en cada etapa del ciclo de vida del desarrollo (**DevSecOps**).

A trav√©s de esta demostraci√≥n, hemos comprobado que:

1.  **La seguridad comienza en la imagen base:** Cambiar de una imagen est√°ndar (Ubuntu/Node) a una imagen m√≠nima (**Alpine**) reduce la superficie de ataque en un 90% o m√°s, eliminando cientos de vulnerabilidades heredadas.
2.  **El principio de M√≠nimo Privilegio es vital:** Ejecutar contenedores como usuario **No-Root** y restringir el sistema de archivos (`readOnlyRootFilesystem`) son las defensas m√°s efectivas contra la escalada de privilegios y la persistencia de malware.
3.  **La defensa en profundidad es necesaria:** No basta con asegurar la imagen; el entorno de ejecuci√≥n (Runtime) debe protegerse mediante **Network Policies** en Kubernetes para aislar los servicios y prevenir la exfiltraci√≥n de datos en caso de una brecha.

## Video
[Video de Demo](https://youtu.be/_QCGgr5kQjc)

## PPT
[Presentaci√≥n](https://www.canva.com/design/DAG55FPdUew/IUksCrKIXbQV3DYGYjMqSw/edit?utm_content=DAG55FPdUew&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton)

---

[‚¨ÖÔ∏è Anterior](../0.8.3/0.8.3.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../0.8.5/0.8.5.md)